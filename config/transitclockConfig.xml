<?xml version="1.0" encoding="UTF-8"?>
<transitclock>
    <modules>
        <!-- <optionalModulesList>org.transitime.core.schedBasedPreds.SchedBasedPredsModule;org.transitime.avl.GtfsRealtimeModule</optionalModulesList> -->
        <!-- GtfsRealtimeModule read a GTFS vehicle location feed as the source of AVL data. -->
        <!-- PredictionAccuracyModule is used to store the transiTime prediction and record their accuracy. Look in class for comments explaining detail. -->
        <!-- GTFSRealtimePredictionAccuracyModule is used to store an alternative source of predictions and again record there accuracy based on actual arrival/departure times -->
        <!-- org.transitclock.core.schedBasedPreds.SchedBasedPredsModule -->
        <optionalModulesList>org.transitclock.avl.GtfsRealtimeModule;org.transitclock.core.predAccuracy.PredictionAccuracyModule</optionalModulesList>
    </modules>
    <!-- <gtfs> -->
    	<!-- <routeIdFilterRegEx>6</routeIdFilterRegEx> -->
    <!-- </gtfs> -->
    <!-- <predAccuracy> -->
    	<!-- <pollingRateMsec>240000</pollingRateMsec> -->
    	<!-- This value is used by GTFSRealtimePredictionAccuracyModule to pick up feed to compare against transitime feed -->
    	<!-- <gtfsTripUpdateUrl>http://realtime.prod.obahart.org:8088/trip-updates</gtfsTripUpdateUrl> -->
    <!-- </predAccuracy> -->

    <autoBlockAssigner>
		<autoAssignerEnabled>true</autoAssignerEnabled>
		<ignoreAvlAssignments>false</ignoreAvlAssignments>
		<allowableEarlySeconds>600</allowableEarlySeconds>
		<allowableLateSeconds>600</allowableLateSeconds>
    </autoBlockAssigner>
    <core>
    	<predictionGeneratorClass>org.transitclock.core.PredictionGeneratorDefaultImpl</predictionGeneratorClass>
    	<!-- <maxDistanceFromSegment>30000</maxDistanceFromSegment> -->
    	<holdingTimeGeneratorClass></holdingTimeGeneratorClass>

        <allowableNumberOfBadMatches>5</allowableNumberOfBadMatches>

        <!-- because of higher refresh rate -->
        <matchHistoryMaxSize>60</matchHistoryMaxSize>
        <avlHistoryMaxSize>60</avlHistoryMaxSize>
        <eventHistoryMaxSize>60</eventHistoryMaxSize>

        <!-- 45 minutes -->
        <!-- <allowableEarlySeconds>2700</allowableEarlySeconds> -->

        <!-- 15 minutes -->
        <!-- <allowableEarlySecondsForInitialMatching>900</allowableEarlySecondsForInitialMatching> -->

        <!-- disable VehicleEvent eventTypes "Delayed" and "No progress" -->
        <timeForDeterminingNoProgress>0</timeForDeterminingNoProgress>
        <timeForDeterminingDelayedSecs>0</timeForDeterminingDelayedSecs>
    </core>
    <avl>
        <!-- URL for GTFS realtime vechicle location stream. Changed name in versions do use both for the moment. -->
        <gtfsRealtimeFeedURI>GTFSRTVEHICLEPOSITIONS</gtfsRealtimeFeedURI>
		<url>GTFSRTVEHICLEPOSITIONS</url>
		<!--  These are the values used for Irish Rail. -->
        <!-- <minLongitude>-10.725</minLongitude>
        <maxLongitude>-5.35</maxLongitude>
        <minLatitude>51.35</minLatitude>
        <maxLatitude>55.45</maxLatitude>
         -->
        <!--  defaults are for north america so only need this if we are not using data from there. -->
        <!--  These are the values used for CAPMETRO in Austin, Texas. -->
        <!-- <minLatitude>30.145125</minLatitude>
        <maxLatitude>30.517681</maxLatitude>

        <minLongitude>-98.072043</minLongitude>
        <maxLongitude>-97.495917</maxLongitude>
         -->

        <feedPollingRateSecs>FEED_POLLING_RATE_SECS</feedPollingRateSecs>

    </avl>
    <db>
        <dbName>POSTGRES_DB</dbName>
        <dbHost>POSTGRES_PORT_5432_TCP_ADDR:POSTGRES_PORT_5432_TCP_PORT</dbHost>
        <dbType>postgresql</dbType>
        <dbUserName>POSTGRES_USER</dbUserName>
        <dbPassword>PGPASSWORD</dbPassword>
    </db>
    <hibernate>
        <configFile>/usr/local/transitclock/config/hibernate.cfg.xml</configFile>
    </hibernate>
    <web>
    	<mapTileUrl>https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png</mapTileUrl>
    	<mapTileCopyright>carto, openstreetmap</mapTileCopyright>
    </web>
</transitclock>
